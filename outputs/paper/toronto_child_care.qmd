---
title: "Licensed Child Care Spaces in Toronto's 25 Wards" 
subtitle: ""
author: 
  - Thomas Fox
thanks: "Code and data are available at: https://github.com/ThomasWilliamFox/toronto_child_care"
date: today
date-format: long
abstract: "Analysis of licensed child care facilities, child population, and average household income in Toronto's 25 wards. Investigation reveals a negative correlation between children per child care space and average household income by ward. This suggests increased competition for child caare spaces in wards with lower income and decreased competition for child care spaces in wards with higher incomes. This finding demonstrates a lack of equity surrounding access to licensed childcare facilities in Toronto."
format: pdf
number-sections: true
toc: true
bibliography: references.bib
nocite: |
  @wei, @angelis
---

```{r}
#| include: false
#| warning: false
#| message: false
#| echo: false

# Formatting and presentation strategies used in this project were derived in part from both:
# https://github.com/christina-wei/INF3104-1-Covid-Clinics/tree/main
# &
# https://github.com/InessaDeAngelis/Toronto_Elections
# See references for full citations

library(tidyverse)
library(here)
library(knitr)
library(tinytex)
library(opendatatoronto)
library(dplyr)
library(janitor)
```

```{r}
#| include: false
#| echo: false
#| message: false

# read cleaned child care data
child_care = read_csv(
  file = here("outputs/data/child_care_data.csv"),
  show_col_types = FALSE
)

# read cleaned census data
census_data = read_csv(
  file = here("outputs/data/census_data.csv"),
  show_col_types = FALSE
)

# read cleaned merged child care/census data
 census_childcare_data = read_csv(
  file = here("outputs/data/merged_ward_data.csv"),
  show_col_types = FALSE
)

# read ward names
ward_names = read_csv(
  file = here("outputs/data/ward_names.csv"),
  show_col_types = FALSE
)
```


# Introduction

Access to child care is vital to the social and economic health of a community such as the City of Toronto. Accessible child care has been shown to influence occupational and educational opportunities for parents, especially those in low-income situations [@childcare]. This leads to increased economic prosperity for parents and families which in turn, brings positive impacts to their physical and social well-being [@childcare]. Child care access also has an impact on the health and development of children who attend these facilities [@rhijn]. Vulnerable children greatly benefit from child care access as these centers help to facilitate early intervention methods [@underwood]. Equitable access to child care is therefore an important facet of community health and development.  

This paper explores data made available by Open Data Toronto [@opendatatoronto] related to licensed child care facilities and city ward profiles to explore the relationship between child care access and ward demographics. The data was analyzed and processed with the programming language R [@citeR]. Various packages were also used in the processing, cleaning, and presentation of this information such as tidyverse [@tidyverse], here [@here], knitr [@knitr], tinytex [@tinytex], dplyr [@dplyr], janitor [@janitor], and plyr [@plyr]. 

This analysis shows a negative correlation between the number of children in a ward per existing child care space and average household income ([see @sec-investigation]). This suggests that lower income wards experience greater competition for child care access and higher income wards experience less competition. This finding demonstrates a trend of inequitable access to child care across the city of Toronto. As child care access plays a central role in the social and economic well-being of communities, and has an especially positive impact on vulnerable children and low-income families, these findings support measures and initiatives aimed at ensuring more equitable access to child care in the City of Toronto [see @strategy].

The remainder of this paper outlines the data, the data analysis, and an investigation of the findings. [@sec-data] contains three sub-sections. [@sec-childcare] outlines the "Licensed Child Care Centres" data set [@caredata] provided by the opendatatoronto [@opendatatoronto]. [@sec-wards] explores the "Ward Profiles (25-Ward Model)" data set [@wards] also provided by the opendatatoronto [@opendatatoronto]. [@sec-investigation] investigates aspects of both data sets and their relationship. 

# Data {#sec-data}

## Licensed Child Care Centres in Toronto {#sec-childcare}

The "Licensed Child Care Centres" data set is provided to Open Data Toronto (@opendatatoronto) by the City's Children's Services division [@caredata]. The data set contains 1,063 entries which correspond to each licensed child care facility in Toronto. The variables chosen to include in the cleaned data set are the facility ID number, ward number where the facility is located, total number of individual child care spaces at the facility, and the facility's operation type (Commercial, Non Profit or Public). @tbl-childcaredata shows the first 6 entries in this data set. 

```{r}
#| label: tbl-childcaredata
#| tbl-cap: Sample of Cleaned Toronto Licensed Child Care Data
#| echo: false
#| warning: false

# Ref from https://github.com/christina-wei/INF3104-1-Covid-Clinics/blob/main/outputs/paper/covid_clinics.qmd
head(child_care, 6) |>
  kable(
    col.names = c("Facility ID", " Ward Number", "Total Spaces", "Type"),
    booktabs = TRUE
  )

```

@fig-totalspots displays the total individual child care spaces found in each of Toronto's 25 wards. Among the wards with the least amount of child care spaces are Scarborough-Rouge Park with 1909 spaces, Scarborough North with 2078 spaces, and Etobicoke North with 2089. The wards with the greatest number of child care spaces are Beaches-East York with 4598, Toronto-Danforth	with 4894, and Etobicoke-Lakeshore with 4910. 

```{r}
#| label: fig-totalspots
#| fig-cap: Total number of child-care spaces by ward
#| echo: false
#| warning: false

# turn ward_names into list for graph substitution with ward numbers 
ward_name_list <- as.list(ward_names$ward_name)

# substitute ward numbers for names
census_childcare_data <-
  census_childcare_data |>
  mutate(ward = as.character(ward))

for (x in 1:25) {
  census_childcare_data$ward[census_childcare_data$ward == x] = ward_name_list[[x]]
} 

# construct graph 
child_care_graph_1 <-
  census_childcare_data|>
  ggplot(aes(x = reorder(ward, 1:25), y = total_spots)) +
  geom_bar(stat = "identity") +
  theme_minimal() +
  theme(axis.text.x = element_text(size = 7, angle = 45, vjust = 1, hjust=1))+
  labs(x = "Ward", y = "Total child care spaces")

child_care_graph_1
```


## Toronto Ward Profiles Based on 2021 Canada Census Data  {#sec-wards}

The "Ward Profiles (25-Ward Model)" data set is provided to Open Data Toronto (@opendatatoronto) by Toronto City Planning [@wards]. This resource contains three separate data sub-sets. Statistics Canada Census data related to Toronto's 25 wards from 2011, 2016, and 2021 is found in the first sub-set. Geographic locations of each ward can be found in the second sub-set, followed by a sub-set containing each ward number and its corresponding name. The data sets of interest in this paper are the "2023-WardProfiles-2011-2021-CensusData" set which is used to determine demographic information related to each ward, and the "25-WardNames-Numbers" set that is used to help with data visualization in this paper [@wards]. Variables isolated from the 2021 Canada Census include ward number, average household income, median household income and population counts for age ranges: 0 - 4, 5 - 9, and 10 - 14. @tbl-censusdata shows the first six entries in the cleaned data set.

```{r}
#| label: tbl-censusdata
#| tbl-cap: Sample of Cleaned 2021 Canada Census Data
#| echo: false
#| warning: false

# Ref from https://github.com/christina-wei/INF3104-1-Covid-Clinics/blob/main/outputs/paper/covid_clinics.qmd
head(census_data, 6) |>
  kable(
    col.names = c("Ward Number", "Age 0-4", "Age 5-9", "Age 10-14", "Average Household Income", "Median Household Income"),
    booktabs = TRUE
  )
```


@fig-totalspots displays the total individual child care spaces found in each of Toronto's 25 wards. Among the wards with the least amount of child care spaces are Scarborough-Rouge Park with 1909 spaces, Scarborough North with 2078 spaces, and Etobicoke North with 2089. The wards with the greatest number of child care spaces are Beaches-East York with 4598, Toronto-Danforth	with 4894, and Etobicoke-Lakeshore with 4910. 

A sense of the dataset should be communicated to the reader. 

The broader context of the dataset should be discussed. 

All variables should be thoroughly examined and explained. 

Explain if there were similar datasets that could have been used and why they were not. 

If variables were constructed then this should be mentioned, and high-level cleaning aspects of note should be mentioned, but this section should focus on the destination, not the journey. 

It is important to understand what the variables look like by including graphs, and possibly tables, of all observations, along with discussion of those graphs and the other features of these data. 

Summary statistics should also be included, and well as any relationships between the variables. If this becomes too detailed, then appendices could be used.
```{r}
ordereddata <-
  census_childcare_data |>
  arrange(total_spots)
tail(ordereddata)
```

```{r}
#| label: fig-totalchildren
#| fig-cap: Population under 15 years of age by ward
#| echo: false
#| warning: false

# substitute ward numbers for names
for (x in 1:25) {
  census_data$ward[census_data$ward == x] = ward_name_list[[x]]
} 

# construct graph 
census_graph_population<-
  census_data|>
  ggplot(aes(x = reorder(ward, 1:25), y = pop_0_to_4 + pop_5_to_9 + pop_10_to_14)) +
  geom_bar(stat = "identity") +
  theme_minimal() +
  theme(axis.text.x = element_text(size = 7, angle = 45, vjust = 1, hjust=1))+
  labs(x = "Ward", y = "Population under 15 years old") 

census_graph_population
```

I then looked at what the average income was per ward (@fig-avgincome).


```{r}
#| label: fig-avgincome
#| fig-cap: Average household income by ward
#| echo: false
#| warning: false

# Construct graph 
census_graph_income <-
  census_data |>
  ggplot(aes(x = reorder(ward, avg_hh_income), y = avg_hh_income)) +
  geom_bar(stat = "identity") +
  theme_minimal() +
  theme(axis.text.x = element_text(size = 7, angle = 45, vjust = 1, hjust=1)) +
  labs(x = "Ward arranged by average household income", y = "Average household income")
census_graph_income
```
## Investigation {#sec-investigation}

I then made a graph that displayed the number of child care spaces in each ward in acending order based on average household income (@fig-spacesbyincome) 


```{r}
#| label: fig-spacesbyincome
#| fig-cap: Number of child care spaces by ward (arranged by average income)
#| echo: false
#| warning: false

# Construct graph 
spaces_by_ward <- 
  census_childcare_data|>
  ggplot(aes(x = reorder(ward, avg_hh_income), y = total_spots)) +
  geom_bar(stat = "identity") +
  theme_minimal() +
  theme(axis.text.x = element_text(size = 7, angle = 45, vjust = 1, hjust=1)) +
  labs(x = "Ward arranged by average household income", y = "Child care spaces")

spaces_by_ward
```

I then constructed a scatter plot showing the number of children under the age of 14 per child care space in each ward arranged in ascending order by average household income (@fig-childrenspacesplot). 

```{r}
#| label: fig-childrenspacesplot
#| fig-cap: Number of children per child care space by ward
#| echo: false
#| warning: false

# Arrange merged data by average income (ascending)
census_childcare_by_income <-
  arrange(census_childcare_data, avg_hh_income)

# Construct graph 
children_per_space_by_income <- 
  census_childcare_by_income |>
  ggplot(aes(x=reorder(ward, avg_hh_income), y= total_under_15/total_spots)) +
  geom_point(fill= "black", size=1, shape=23) +
  geom_smooth(mapping = aes(x=1:25, y = total_under_15/total_spots), method=lm, se=FALSE) +
  theme_minimal() +
  theme(axis.text.x = element_text(size = 7, angle = 45, vjust = 1, hjust=1)) +
  labs(x = "Ward arranged by average household income ", y = "Children per child care space") 

suppressMessages(print(children_per_space_by_income))
```


Talk more about it.

And also planes. (You can change the height and width, but don't worry about doing that until you have finished every other aspect of the paper - Quarto will try to make it look nice and the defaults usually work well once you have enough text.)


\newpage

\appendix

# Appendix {-}

```{r}
#| label: tbl-mergeddata
#| tbl-cap: Sample of Merged Licensed Child Care Centres in Toronto and Ward Profiles (2021 Census Data) used to build graphs
#| echo: false
#| warning: false

# Ref from https://github.com/christina-wei/INF3104-1-Covid-Clinics/blob/main/outputs/paper/covid_clinics.qmd

merged_data <-
  census_childcare_data |>
  select(ward, avg_hh_income, total_spots, total_under_15)

head(merged_data, 6) |>
  kable(
    col.names = c("Ward Number", "Average Household Income", "Child Care Spaces", "Population Aged 0 - 14"),
    booktabs = TRUE
  )

```


\newpage

# References


